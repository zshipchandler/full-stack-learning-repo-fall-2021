{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction once(emitter, name) {\n  let {\n    signal\n  } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new Promise((resolve, reject) => {\n    function cleanup() {\n      signal === null || signal === void 0 ? void 0 : signal.removeEventListener('abort', cleanup);\n      emitter.removeListener(name, onEvent);\n      emitter.removeListener('error', onError);\n    }\n\n    function onEvent() {\n      cleanup();\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      resolve(args);\n    }\n\n    function onError(err) {\n      cleanup();\n      reject(err);\n    }\n\n    signal === null || signal === void 0 ? void 0 : signal.addEventListener('abort', cleanup);\n    emitter.on(name, onEvent);\n    emitter.on('error', onError);\n  });\n}\n\nexports.default = once;","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":";;;;;;AAOA,SAAwB,IAAxB,CAIC,OAJD,EAKC,IALD,EAM6B;AAAA,MAA5B;AAAE,IAAA;AAAF,GAA4B,uEAAF,EAAE;AAE5B,SAAO,IAAI,OAAJ,CAAY,CAAC,OAAD,EAAU,MAAV,KAAoB;AACtC,aAAS,OAAT,GAAgB;AACf,MAAA,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,mBAAR,CAA4B,OAA5B,EAAqC,OAArC,CAAA;AACA,MAAA,OAAO,CAAC,cAAR,CAAuB,IAAvB,EAA6B,OAA7B;AACA,MAAA,OAAO,CAAC,cAAR,CAAuB,OAAvB,EAAgC,OAAhC;AACA;;AACD,aAAS,OAAT,GAA+B;AAC9B,MAAA,OAAO;;AADuB,wCAAX,IAAW;AAAX,QAAA,IAAW;AAAA;;AAE9B,MAAA,OAAO,CAAC,IAAD,CAAP;AACA;;AACD,aAAS,OAAT,CAAiB,GAAjB,EAA2B;AAC1B,MAAA,OAAO;AACP,MAAA,MAAM,CAAC,GAAD,CAAN;AACA;;AACD,IAAA,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,gBAAR,CAAyB,OAAzB,EAAkC,OAAlC,CAAA;AACA,IAAA,OAAO,CAAC,EAAR,CAAW,IAAX,EAAiB,OAAjB;AACA,IAAA,OAAO,CAAC,EAAR,CAAW,OAAX,EAAoB,OAApB;AACA,GAjBM,CAAP;AAkBA;;AA1BD,OAAA,CAAA,OAAA,GAAA,IAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction once(emitter, name, { signal } = {}) {\n    return new Promise((resolve, reject) => {\n        function cleanup() {\n            signal === null || signal === void 0 ? void 0 : signal.removeEventListener('abort', cleanup);\n            emitter.removeListener(name, onEvent);\n            emitter.removeListener('error', onError);\n        }\n        function onEvent(...args) {\n            cleanup();\n            resolve(args);\n        }\n        function onError(err) {\n            cleanup();\n            reject(err);\n        }\n        signal === null || signal === void 0 ? void 0 : signal.addEventListener('abort', cleanup);\n        emitter.on(name, onEvent);\n        emitter.on('error', onError);\n    });\n}\nexports.default = once;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}